# **5. K·ª∏ THU·∫¨T DEBUG V√Ä TROUBLESHOOTING**

## **üîç C√îNG C·ª§ CH√çNH: CHROME DEVTOOLS**

Chrome DevTools l√† c√¥ng c·ª• quan tr·ªçng nh·∫•t cho frontend developer:

-   **Elements Panel** (Ctrl+Shift+C): Ki·ªÉm tra HTML v√† CSS

    -   Xem/s·ª≠a DOM v√† CSS tr·ª±c ti·∫øp
    -   Ki·ªÉm tra Box Model (margin, padding, border)
    -   Xem Computed Styles ƒë·ªÉ hi·ªÉu CSS ƒë√£ √°p d·ª•ng

-   **Console Panel** (Ctrl+Shift+J): Debug JavaScript

    -   `console.log()`/`console.error()` - hi·ªÉn th·ªã th√¥ng tin
    -   `console.table()` - hi·ªÉn th·ªã d·ªØ li·ªáu d·∫°ng b·∫£ng
    -   Xem JavaScript errors

-   **Network Panel** (Ctrl+Shift+E): Ki·ªÉm tra requests
    -   Xem API responses
    -   Ki·ªÉm tra th·ªùi gian t·∫£i
    -   M√¥ ph·ªèng m·∫°ng ch·∫≠m (Throttling)

## **üîÑ QUY TR√åNH DEBUG**

1. **T√°i hi·ªán l·ªói**: X√°c ƒë·ªãnh ch√≠nh x√°c steps ƒë·ªÉ t·∫°o l·ªói
2. **Ki·ªÉm tra Console**: ƒê·ªçc th√¥ng b√°o l·ªói JavaScript
3. **Xem Elements**: Ki·ªÉm tra HTML/CSS c√≥ v·∫•n ƒë·ªÅ
4. **Ki·ªÉm tra Network**: Xem API c√≥ l·ªói kh√¥ng
5. **S·ª≠a l·ªói**: √Åp d·ª•ng gi·∫£i ph√°p v√† test k·ªπ

## **üéØ DEBUG CSS PH·ªî BI·∫æN**

-   **Th√™m outline ƒë·ªÉ debug layout**:

    ```css
    * {
        outline: 1px solid red;
    }
    ```

-   **Ki·ªÉm tra CSS kh√¥ng ho·∫°t ƒë·ªông**:

    1. Elements panel > ch·ªçn element
    2. Ki·ªÉm tra Styles panel
    3. T√¨m CSS b·ªã ghi ƒë√® (crossed out)

-   **Responsive bug**:
    1. M·ªü Device Mode (Ctrl+Shift+M)
    2. Test ·ªü nhi·ªÅu m√†n h√¨nh
    3. T√¨m elements g√¢y overflow

## **üíª DEBUG JAVASCRIPT**

-   **D√πng breakpoints**:

    1. DevTools > Sources panel
    2. T√¨m file JS
    3. Click v√†o s·ªë d√≤ng ƒë·ªÉ ƒë·∫∑t breakpoint
    4. Refresh trang
    5. Step qua t·ª´ng d√≤ng code

-   **Event kh√¥ng ho·∫°t ƒë·ªông**:
    1. Ki·ªÉm tra selectors
    2. Ki·ªÉm tra console errors
    3. ƒê·∫£m b·∫£o code ch·∫°y sau khi DOM ƒë√£ load

## **üì± DEBUG MOBILE**

-   D√πng Device Mode trong Chrome (Ctrl+Shift+M)
-   Remote debug qua USB (chrome://inspect)
-   Test tr√™n thi·∫øt b·ªã th·∫≠t khi c√≥ th·ªÉ

## **üö® L·ªñI TH∆Ø·ªúNG G·∫∂P**

### **CSS**

-   Selector thi·∫øu specificity (ƒë·ªô ∆∞u ti√™n th·∫•p)
-   Media queries kh√¥ng ƒë√∫ng
-   Typo trong class name
-   Flexbox/Grid kh√¥ng nh∆∞ mong ƒë·ª£i

### **JavaScript**

-   DOM ch∆∞a load xong khi code ch·∫°y
-   Sai selector khi query elements
-   Scope/this kh√¥ng ƒë√∫ng
-   Async code thi·∫øu error handling

### **Network**

-   API endpoints kh√¥ng ƒë√∫ng
-   Request thi·∫øu headers/params
-   CORS errors
-   Server response errors

## **üîç CHECKLIST KHI DEBUG**

1. Console c√≥ l·ªói kh√¥ng?
2. Network requests c√≥ th√†nh c√¥ng kh√¥ng?
3. DOM c√≥ ƒë√∫ng c·∫•u tr√∫c kh√¥ng?
4. CSS c√≥ √°p d·ª•ng ƒë√∫ng kh√¥ng?
5. Event handlers c√≥ ƒë∆∞·ª£c k√≠ch ho·∫°t kh√¥ng?
6. Mobile/responsive c√≥ v·∫•n ƒë·ªÅ kh√¥ng?

## **‚≠ê TIP QUAN TR·ªåNG NH·∫§T**

**T·ª´ng b∆∞·ªõc m·ªôt**: Debug l√† qu√° tr√¨nh t√¨m t√≤i c√≥ ph∆∞∆°ng ph√°p. Chia v·∫•n ƒë·ªÅ th√†nh t·ª´ng ph·∫ßn nh·ªè, theo d√µi lu·ªìng d·ªØ li·ªáu, v√† ki·ªÉm tra t·ª´ng gi·∫£ thi·∫øt.

**Kh√¥ng ƒëo√°n m√≤**: D·ª±a v√†o d·ªØ li·ªáu th·ª±c t·∫ø t·ª´ DevTools thay v√¨ ƒëo√°n, s·∫Ω ti·∫øt ki·ªám th·ªùi gian h∆°n r·∫•t nhi·ªÅu.

## **üõ†Ô∏è Chrome DevTools**

Chrome DevTools l√† c√¥ng c·ª• debug m·∫°nh m·∫Ω v√† kh√¥ng th·ªÉ thi·∫øu khi l√†m vi·ªác v·ªõi frontend.

### **1. Elements Panel**

D√πng ƒë·ªÉ ki·ªÉm tra v√† ch·ªânh s·ª≠a DOM, CSS:

-   **Inspect Element (Ctrl+Shift+C)**: Xem HTML v√† CSS c·ªßa element
-   **Edit HTML**: Double-click v√†o element ƒë·ªÉ ch·ªânh s·ª≠a tr·ª±c ti·∫øp
-   **Styles Pane**: Xem v√† ch·ªânh s·ª≠a CSS
-   **Computed Styles**: Xem styles ƒë√£ t√≠nh to√°n sau khi √°p d·ª•ng t·∫•t c·∫£ CSS
-   **Box Model**: Xem padding, border, margin c·ªßa element
-   **Event Listeners**: Xem c√°c event listeners g·∫Øn v√†o element

### **2. Console Panel**

D√πng ƒë·ªÉ debug JavaScript:

-   **console.log()**: Hi·ªÉn th·ªã gi√° tr·ªã bi·∫øn, object
-   **console.error()**: Hi·ªÉn th·ªã l·ªói v·ªõi m√†u ƒë·ªè
-   **console.warn()**: Hi·ªÉn th·ªã c·∫£nh b√°o v·ªõi m√†u v√†ng
-   **console.table()**: Hi·ªÉn th·ªã d·ªØ li·ªáu d·∫°ng b·∫£ng
-   **console.group()** v√† **console.groupEnd()**: Nh√≥m c√°c logs l·∫°i v·ªõi nhau

```javascript
// V√≠ d·ª• s·ª≠ d·ª•ng console
console.log("User data:", userData);
console.error("API request failed:", error);

// S·ª≠ d·ª•ng console.table cho object/array
console.table(userList);

// Nh√≥m logs
console.group("API Request");
console.log("Request URL:", url);
console.log("Request Method:", method);
console.log("Request Data:", data);
console.groupEnd();
```

### **3. Network Panel**

D√πng ƒë·ªÉ theo d√µi network requests:

-   **Filter requests**: L·ªçc theo JS, CSS, XHR, etc.
-   **Throttling**: M√¥ ph·ªèng network speeds ch·∫≠m
-   **Headers**: Xem request v√† response headers
-   **Response**: Xem n·ªôi dung response
-   **Timing**: Ph√¢n t√≠ch th·ªùi gian c·ªßa request

### **4. Performance Panel**

D√πng ƒë·ªÉ ph√¢n t√≠ch hi·ªáu su·∫•t:

-   **Record performance**: Ghi l·∫°i ho·∫°t ƒë·ªông c·ªßa trang
-   **Analyze rendering**: Xem th·ªùi gian render v√† paint
-   **JavaScript execution**: Ph√¢n t√≠ch th·ªùi gian th·ª±c thi JS

### **5. Application Panel**

D√πng ƒë·ªÉ ki·ªÉm tra storage:

-   **Local/Session Storage**: Xem v√† ch·ªânh s·ª≠a d·ªØ li·ªáu
-   **Cookies**: Qu·∫£n l√Ω cookies
-   **Cache**: Xem cache storage

## **üîÑ Quy tr√¨nh Debug C∆° b·∫£n**

### **1. Reproduce l·ªói**

-   X√°c ƒë·ªãnh c√°c b∆∞·ªõc ƒë·ªÉ t√°i hi·ªán l·ªói
-   Ghi ch√∫ ƒëi·ªÅu ki·ªán xu·∫•t hi·ªán l·ªói (tr√¨nh duy·ªát, thi·∫øt b·ªã, etc.)
-   T·∫°o test case ƒë∆°n gi·∫£n nh·∫•t c√≥ th·ªÉ

### **2. X√°c ƒë·ªãnh nguy√™n nh√¢n**

-   S·ª≠ d·ª•ng DevTools ƒë·ªÉ ki·ªÉm tra DOM, CSS v√† JavaScript
-   Ki·ªÉm tra Console ƒë·ªÉ xem l·ªói JavaScript
-   S·ª≠ d·ª•ng breakpoints trong JavaScript ƒë·ªÉ theo d√µi lu·ªìng th·ª±c thi
-   Ki·ªÉm tra Network panel ƒë·ªÉ xem API requests

### **3. Fix l·ªói**

-   S·ª≠a code d·ª±a tr√™n nguy√™n nh√¢n ƒë√£ x√°c ƒë·ªãnh
-   Test k·ªπ l∆∞·ª°ng sau khi s·ª≠a
-   Ki·ªÉm tra xem fix c√≥ g√¢y ra side effects kh√¥ng

### **4. Refactor n·∫øu c·∫ßn thi·∫øt**

-   Xem x√©t c·∫£i thi·ªán code ƒë·ªÉ tr√°nh l·ªói t∆∞∆°ng t·ª± trong t∆∞∆°ng lai
-   C·∫≠p nh·∫≠t documentation n·∫øu c·∫ßn

## **üéØ K·ªπ thu·∫≠t Debug CSS**

### **1. S·ª≠ d·ª•ng Outline ƒë·ªÉ debug layout**

```css
/* Th√™m v√†o CSS khi debug layout */
* {
    outline: 1px solid red;
}

/* Ho·∫∑c ch·ªâ debug m·ªôt component c·ª• th·ªÉ */
.fong-component * {
    outline: 1px solid blue;
}
```

### **2. Ki·ªÉm tra Specificity c·ªßa CSS**

Khi CSS kh√¥ng ƒë∆∞·ª£c √°p d·ª•ng nh∆∞ mong mu·ªën, ki·ªÉm tra ƒë·ªô ∆∞u ti√™n c·ªßa selectors:

1. M·ªü DevTools > Elements panel
2. Ch·ªçn element c·∫ßn ki·ªÉm tra
3. Xem Styles pane ƒë·ªÉ hi·ªÉu t·∫°i sao m·ªôt s·ªë styles b·ªã ghi ƒë√®

### **3. T√¨m v√† fix Responsive issues**

1. S·ª≠ d·ª•ng Device Mode trong DevTools (Ctrl+Shift+M)
2. Test ·ªü nhi·ªÅu k√≠ch th∆∞·ªõc m√†n h√¨nh
3. Ki·ªÉm tra c√°c breakpoints media query
4. X√°c ƒë·ªãnh element g√¢y overflow horizontal

## **üíª K·ªπ thu·∫≠t Debug JavaScript**

### **1. S·ª≠ d·ª•ng Breakpoints**

1. M·ªü DevTools > Sources panel
2. T√¨m file JS c·∫ßn debug
3. Click v√†o line number ƒë·ªÉ ƒë·∫∑t breakpoint
4. Refresh trang v√† th·ª±c hi·ªán c√°c b∆∞·ªõc ƒë·ªÉ trigger code
5. Khi code d·ª´ng t·∫°i breakpoint, s·ª≠ d·ª•ng Step Over, Step Into ƒë·ªÉ theo d√µi

### **2. S·ª≠ d·ª•ng Conditional Breakpoints**

Khi c·∫ßn debug trong v√≤ng l·∫∑p v·ªõi ƒëi·ªÅu ki·ªán c·ª• th·ªÉ:

1. Right-click v√†o line number
2. Ch·ªçn "Add conditional breakpoint"
3. Nh·∫≠p condition (e.g., `index === 5`)

### **3. Debug Asynchronous Code**

```javascript
// S·ª≠ d·ª•ng async/await ƒë·ªÉ debug d·ªÖ d√†ng h∆°n
async function fetchUserData() {
    try {
        console.log("Fetching data...");
        const response = await fetch("/api/users");
        console.log("Response status:", response.status);

        if (!response.ok) {
            throw new Error(`HTTP error: ${response.status}`);
        }

        const data = await response.json();
        console.log("Data received:", data);
        return data;
    } catch (error) {
        console.error("Fetch error:", error);
        throw error;
    }
}
```

## **üì± Debug tr√™n Thi·∫øt b·ªã Di ƒë·ªông**

### **1. Remote Debugging v·ªõi Chrome**

1. K·∫øt n·ªëi thi·∫øt b·ªã Android v·ªõi m√°y t√≠nh qua USB
2. B·∫≠t USB debugging tr√™n thi·∫øt b·ªã
3. Trong Chrome, m·ªü `chrome://inspect`
4. Ch·ªçn thi·∫øt b·ªã v√† tab ƒë·ªÉ debug

### **2. S·ª≠ d·ª•ng iOS Simulator**

1. S·ª≠ d·ª•ng Safari Web Inspector tr√™n macOS
2. Connect t·ªõi iOS Simulator ho·∫∑c thi·∫øt b·ªã th·∫≠t

### **3. Tools M√¥ ph·ªèng**

-   **BrowserStack**: Test tr√™n nhi·ªÅu thi·∫øt b·ªã th·∫≠t
-   **Responsively App**: Test responsive tr√™n nhi·ªÅu viewports c√πng l√∫c

## **üöÄ K·ªπ thu·∫≠t Performance Debugging**

### **1. Ph√¢n t√≠ch Render Performance**

1. M·ªü DevTools > Performance panel
2. Click Record
3. Th·ª±c hi·ªán c√°c t∆∞∆°ng t√°c tr√™n trang
4. D·ª´ng recording v√† ph√¢n t√≠ch k·∫øt qu·∫£
5. T√¨m c√°c Long Tasks v√† Jank

### **2. T·ªëi ∆∞u h√≥a CSS Rendering**

-   Tr√°nh s·ª≠ d·ª•ng qu√° nhi·ªÅu shadows, gradients
-   Gi·∫£m s·ªë l∆∞·ª£ng CSS selectors ph·ª©c t·∫°p
-   S·ª≠ d·ª•ng `will-change` cho animations
-   Tr√°nh layouts l·ªìng nhau qu√° nhi·ªÅu

### **3. T·ªëi ∆∞u h√≥a JavaScript Execution**

-   Tr√°nh DOM manipulation qu√° nhi·ªÅu
-   S·ª≠ d·ª•ng throttle v√† debounce cho event handlers
-   Lazy loading cho components kh√¥ng hi·ªÉn th·ªã ngay
-   Tr√°nh blocking main thread v·ªõi heavy computations

## **üîß C√¥ng c·ª• Debugging kh√°c**

### **1. Browser Extensions**

-   **React Developer Tools**: Debug React components
-   **Vue.js devtools**: Debug Vue components
-   **Redux DevTools**: Debug Redux state
-   **Augury**: Debug Angular applications

### **2. Logging Tools**

-   **Sentry**: Error tracking v√† monitoring
-   **LogRocket**: Session replay v√† error tracking

### **3. Performance Tools**

-   **Lighthouse**: Audit performance, accessibility, SEO
-   **WebPageTest**: Comprehensive performance testing

## **üß™ Unit Testing ƒë·ªÉ Prevent Bugs**

### **1. Jest v√† Testing Library**

```javascript
// V√≠ d·ª• test c∆° b·∫£n v·ªõi Jest
test("button click increments counter", () => {
    // Setup
    document.body.innerHTML = `<button id="counter-btn">Click me</button>
                               <div id="counter">0</div>`;
    const btn = document.getElementById("counter-btn");
    const counter = document.getElementById("counter");

    // Attach event handler
    btn.addEventListener("click", () => {
        counter.textContent = parseInt(counter.textContent) + 1;
    });

    // Initial state
    expect(counter.textContent).toBe("0");

    // Act
    btn.click();

    // Assert
    expect(counter.textContent).toBe("1");
});
```

## **üìã Troubleshooting Checklist**

### **1. CSS Issues**

-   CSS kh√¥ng ƒë∆∞·ª£c applied:

    -   Ki·ªÉm tra file CSS ƒë√£ ƒë∆∞·ª£c loaded ch∆∞a (Network panel)
    -   Ki·ªÉm tra specificity c·ªßa selectors
    -   Ki·ªÉm tra typos trong class names
    -   Ki·ªÉm tra `!important` v√† inline styles

-   Responsive issues:
    -   Ki·ªÉm tra viewport meta tag
    -   Ki·ªÉm tra media queries
    -   Ki·ªÉm tra fixed width elements
    -   Ki·ªÉm tra overflow issues

### **2. JavaScript Issues**

-   JS kh√¥ng ch·∫°y:

    -   Ki·ªÉm tra Console ƒë·ªÉ t√¨m errors
    -   Ki·ªÉm tra file JS ƒë√£ ƒë∆∞·ª£c loaded ch∆∞a (Network panel)
    -   Ki·ªÉm tra DOM ready event
    -   Ki·ªÉm tra typos trong function names ho·∫∑c variables

-   Event handlers kh√¥ng ho·∫°t ƒë·ªông:
    -   Ki·ªÉm tra selectors
    -   Ki·ªÉm tra event delegation
    -   Ki·ªÉm tra scope c·ªßa event handlers
    -   Ki·ªÉm tra timing c·ªßa event binding

### **3. Network Issues**

-   API requests fails:
    -   Ki·ªÉm tra URL ƒë√∫ng kh√¥ng
    -   Ki·ªÉm tra parameters v√† headers
    -   Ki·ªÉm tra CORS issues
    -   Ki·ªÉm tra error responses t·ª´ server

## **üìé Debugging Helper trong Deutschfuns**

Deutschfuns c√≥ m·ªôt helper ƒë·∫∑c bi·ªát cho vi·ªác debug JavaScript:

```javascript
// S·ª≠ d·ª•ng FongDebug helper (autoloaded globally)
FongDebug.log({
    label: "User Data",
    data: userData,
    fileName: "current-file.js",
});

// Log v·ªõi chi ti·∫øt c·ª• th·ªÉ v√† kh√¥ng g·ª≠i l√™n server
FongDebug.log({
    label: "Sensitive Info",
    data: sensitiveData,
    fileName: "user-profile.js",
    sendToServer: false,
});
```

## **üìö T√†i li·ªáu tham kh·∫£o**

-   [Chrome DevTools Documentation](https://developers.google.com/web/tools/chrome-devtools)
-   [MDN: JavaScript Debugging](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors)
-   [CSS-Tricks: Debugging CSS](https://css-tricks.com/debugging-css/)
-   [Frontend Performance Checklist](https://www.smashingmagazine.com/2021/01/front-end-performance-2021-free-pdf-checklist/)

~ from global rules
